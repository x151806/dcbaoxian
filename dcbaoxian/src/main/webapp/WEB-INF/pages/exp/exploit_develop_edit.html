<!-- Content Wrapper. Contains page content -->

<!-- Content Header (Page header) -->
<section class="content-header">
	<h1>
		添加开发 <small>Preview</small>
	</h1>
	<ol class="breadcrumb">
		<li><a href="#"><i class="fa fa-dashboard"></i>首页</a></li>

		<li class="active">添加开发</li>
	</ol>
</section>

<!-- Main content -->
<section class="content">

	<!-- SELECT2 EXAMPLE -->
	<div class="box box-default">
		<div class="box-header with-border">
			<h3 class="box-title"></h3>

			<div class="box-tools pull-right">
				<!-- 最小化 -->
				<button type="button" class="btn btn-box-tool"
					data-widget="collapse">
					<i class="fa fa-minus"></i>
				</button>
				<!-- 关闭 -->
				<button type="button" class="btn btn-box-tool" data-widget="remove">
					<i class="fa fa-remove"></i>
				</button>
			</div>
		</div>
		<!-- /.box-header -->
		<div class="box-body">
			<div class="row">



				<!-- /.col -->
				<div class="col-md-6">
					<div class="form-group">
						<label>开发编号</label> <input type="text" class="form-control"
							name="developNumber" id="developNumber" placeholder="开发编号">
					</div>
					<div class="form-group">
						<label>系统名称</label> <input type="text" class="form-control"
							name="system" id="system" placeholder="系统名称">
					</div>
					<div class="form-group">
						<label>端口</label>
							
							<select class="form-control" name="port" id="port"  style="width: 100%;">
			                <option value="" selected="selected">请选择</option>
			                  <option value="电脑端">电脑端</option>
			                  <option value="手机端">手机端</option>
			                 <option value="微信端">微信端</option>
			                   
                			</select>
					</div>
					<div class="form-group">
						<label>菜单名称</label> <input type="text" class="form-control"
							id="menu" name="menu" placeholder="菜单名称">
					</div>
				</div>
				<div class="col-md-6">
					<div class="form-group">
						<label>主要功能</label>
						<textarea rows="5" cols="20" class="form-control"
							placeholder="主要功能" name="effect" id="effect"></textarea>
					</div>
					<div class="form-group">
						<label>执行人</label> <select id="executor" name="executor"
							class="form-control"></select>
					</div>
					<div class="form-group">
						<label>规定完成时间</label>
						<input type="date" class="form-control" name="appointedTime" id="appointedTime">
					</div>

				</div>



				<!-- /.col -->
				<div class="col-md-12">
					<div class="box-footer">
						<button type="button" class="btn btn-default btn-cancel">取消</button>
						<button type="button" class="btn btn-info pull-right btn-save">保存</button>
					</div>
				</div>


			</div>
			<!-- /.row -->
		</div>
		<!-- /.box-body -->

	</div>
	<!-- /.box -->

</section>




<script>
  $(function () {
	  showProvinceList();
	  
	  $(".box-footer")
	  .on("click",".btn-cancel",doCancel)
	  .on("click",".btn-save",doSave);
   
   
  })
  
  function showProvinceList() {
		$("#executor").append('<option value="">----- 请选择 -----</option>');
		
		
	    	var url="submit/findUserNames.do";
	 	   //3.ajax request
	 	   
	 	   $.getJSON(url,function(result){
	 		  if(result.state==1){
	 			var list = result.data;
	 			for (var i = 0; i < list.length; i++) {
	 				
					var op = '<option value="' + list[i].username + '">' + list[i].username + '</option>';
					$("#executor").append(op);
				}
	 		   }else{
	 			  var op = '<option value=""></option>';
					$("#executor").append(op);
	 		   }
	 	   });
		
	}
  
  
  function doCancel(){
	
	$("#mainContentId").load("exploit/doDevelopUI.do");
 }
 function doSave(){
	
	 //1.获取表单数据
	 var params=doGetEditFormData();
	
	 var insertUrl="exploit/doSaveObject.do";
	
	 var url=insertUrl;
	 console.log(params);
	 $.post(url,params,function(result){
		 
		 if(result.state==1){
			 alert(result.message);
			 doCancel();
		 }else{
			alert(result.message);
		 }
	 })
 }
 function doGetEditFormData(){
	 var params={
			 developNumber:$("#developNumber").val(),
			 system:$("#system").val(),
			 port:$("#port").val(),
			 menu:$("#menu").val(),
			 effect:$("#effect").val(),
			 appointedTime:$("#appointedTime").val(),
			 executor:$("#executor").val()
			 }
	 return params;
 }
</script>
</body>
</html>
